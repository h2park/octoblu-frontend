<breadcrumb-tab-bar fragments="fragments"></breadcrumb-tab-bar>
<md-content class="interior__wrapper">

  <div class="interior">
    <div class="FlowConfigure-permissions" ng-hide="controller.permissionsUpdated">
      <spinner class="Flowconfigure-permissionsSpinner" loading="controller.permissionsLoading" size="large"></spinner>

      <div ng-show="thingsNeedingSendWhitelist">
        <span class="FlowConfigure-permissionHeader">These things need to have permission to send your flow messages</span>
          <ul class="FlowConfigure-permissionsList">
            <li ng-repeat="permission in thingsNeedingSendWhitelist">
              {{controller.checkForServiceNames(permission)}}
            </li>
          </ul>
      </div>
      <div ng-show="thingsNeedingReceiveAs">
        <span class="FlowConfigure-permissionHeader">These things need to have permission to receieve messages as your flow</span>
        <ul class="FlowConfigure-permissionsList">
          <li ng-repeat="permission in thingsNeedingReceiveAs">
            {{controller.checkForServiceNames(permission)}}
          </li>
        </ul>
      </div>
      <button
        ng-click="controller.updatePermissions()"
        ng-show="thingsNeedingReceiveAs || thingsNeedingSendWhitelist"
        class="BluButton BluButton--save">
        MY BODY IS READY DO IT
      </button>
    </div>

    <div class="FlowConfigure-container">
      <nav class="FlowConfigure-sideNav">
        <button
          ng-repeat="node in flow.nodes"
          class="FlowConfigure-sideNav-item"
          ng-click="controller.setSelectedNode(node)"
          ng-class="{'FlowConfigure-sideNav-item--is-selected': node == selectedNode}">
          {{controller.prettifyType(node.type)}}
        </button>
      </nav>
      <div class="FlowConfigure-nodes" ng-show="selectedNode">
        <h3 class="FlowConfigure-nodeHeader">{{controller.prettifyType(selectedNode.type)}}</h3>
        <flow-node-editor
          flow="flow"
          flow-node="selectedNode">
        </flow-node-editor>
      </div>
    </div>

    <a class="FlowConfigure-save BluButton BluButton--save" ng-click="controller.saveFlow()">CHECK OUT YO FLOW DAWG!!!!!!</a>
  </div>
</md-content>
