<md-toolbar class="BluToolbar">
  <div class="md-toolbar-tools BluToolbar-tools">
    <div class="BluToolbar-align BluToolbar-align--left">
      <md-button
        ng-click="toggleNav()"
        ng-hide="isNavLockedOpen()"
        class="md-icon-button BluToolbar-menuButton"
        aria-label="Navigation">
        <i class="fa fa-lg fa-bars"></i>
      </md-button>

      <h2 class="BluToolbar-header">
        Edit Bluprint
      </h2>
    </div>

    <div class="BluToolbar-align BluToolbar-align--right"></div>
  </div>
</md-toolbar>
<md-content class="interior__wrapper" autoscroll="false">
  <header class="interior__header">
    <div class="interior">
      <div class="breadcrumbs">
        <a ui-sref="material.bluprints" class="breadcrumb-link">Bluprints</a>
        <i class="fa fa-angle-double-right fa-lg"></i>
        <span class="breadcrumb-link current">Edit {{bluprint.name}}</span>
      </div>
    </div>
  </header>
</md-content>
<md-content class="Bluprints">
  <div class="Bluprint-list">
    <div class="Bluprint-listItem">
      <header class="Bluprint-header">
        <h3 class="Bluprint-name">
            {{bluprint.name}}
        </h3>
        <div class="Bluprint-meta import-bluprint--stats">
          <span ng-show="bluprint.public" class="Bluprint-metaItem">
            <i class="fa fa-globe"></i>
            Public
          </span>
          <span ng-show="bluprint.public" class="Bluprint-metaItem">
            <i class="fa fa-star"></i>
            {{bluprint.likedBy.length}}
          </span>
          <span ng-hide="bluprint.public" class="Bluprint-metaItem">
            <i class="fa fa-lock"></i>
            Private
          </span>
        </div>
      </header>
      <div class="import-bluprint--description">
        <md-input-container class="name" ng-show="editMode">
          <label>Name</label>
          <input required ng-model="bluprint.name">
        </md-input-container>
        <p class="Bluprint-description" ng-hide="editMode">
          {{bluprint.description || 'No description'}}
          <span class="Bluprint-edit">
            -
            <a class="Bluprint-editLink" ng-hide="editMode" ng-click="editMode = true">
              Edit
            </a>
          </span>
        </p>
        <md-input-container class="name" ng-show="editMode">
          <label>Description</label>
          <input required ng-model="bluprint.description">
        </md-input-container>
      </div>
      <md-switch
        ng-model="bluprint.public"
        class="make-public Bluprint-edit-field"
        aria-label="Make Bluprint Public"
        ng-show="editMode">
        Public
        <em>(Making your Bluprint public will allow other users to import it from the Discover page.)</em>
      </md-switch>
      <div class="import-bluprint--actions" ng-show="editMode">
        <a class="BluButton import-bluprint--save-button" ng-click="controller.updateBluprintNow()">Save</a>
        <a class="BluButton import-bluprint--cancel-button" ng-click="editMode = false">Cancel</a>
      </div>
      <div ng-hide="editMode" class="import-bluprint--actions">
        <button class="BluButton import-bluprint--import-button"
                ng-click="controller.import()"
                title="Import"
                aria-label="import">IMPORT</button>
      </div>
      <div class="flow-image-but-really-the-flow">
        <flow-editor flow="bluprint.flow" readonly="true"></flow-editor>
      </div>
    </div>
  </div>
</md-content>
