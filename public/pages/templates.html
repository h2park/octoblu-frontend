<md-toolbar>
  <h2 class="md-toolbar-tools page-heading" layout="row" layout-align="space-between">
    <div flex layout="row">
      <a href class="menu-icon" ng-click="toggleNav()">
        <i class="fa fa-bars" ng-hide="isNavLockedOpen()"></i> Templates
      </a>
    </div>
  </h2>
</md-toolbar>

<md-content class="templates-container">
  <ul class="flows">
    <li ng-repeat="flow in templates | filter: {name:templateSearch}" class="md-whiteframe-z1 flow" ng-click="setCurrentTemplate(flow)">
      <div class="header">
        <h3 class="name">
          {{flow.name}}
        </h3>
        <div class="actions">
          <md-button aria-label="Delete Template" class="action md-icon-button" ng-click="confirmDeleteTemplate(flow.uuid)">
            <md-tooltip>Delete</md-tooltip>
            <md-icon md-font-icon="fa fa-lg fa-trash"></md-icon>
          </md-button>
          <md-button ng-click="togglePublic(flow)" ng-class="{public: flow.public}" aria-label="Make Template Public" class="action md-icon-button">
            <md-tooltip>Public</md-tooltip>
            <md-icon md-font-icon="fa fa-lg fa-globe"></md-icon>
          </md-button>
          <md-button aria-label="Import Template" class="action md-icon-button" ng-click="importFlow(flow.uuid)">
            <md-tooltip>Import</md-tooltip>
            <md-icon md-font-icon="fa fa-lg fa-plus"></md-icon>
          </md-button>
          <md-button aria-label="Copy Template Link" class="action md-icon-button" clip-click-fallback="dialogTemplateUrl(currentTemplate.url)" clip-copy="currentTemplate.url" clip-click="toastTemplateUrl(currentTemplate.url)">
            <md-tooltip>Copy</md-tooltip>
            <md-icon md-font-icon="fa fa-lg fa-copy"></md-icon>
          </md-button>
        </div>
      </div>

      <div class="content">
        <p ng-if="flow.description" class="description">
          {{flow.description}}
        </p>
        <p ng-hide="flow.description" class="description">
          No description available.
        </p>

        <div class="tags">
          <a href="#" ng-repeat="tag in flow.tags" class="tag">{{tag}}</a>
        </div>
      </div>

      <div class="footer">
        <div class="info-group">
          <div class="info" ng-class="{liked: controller.liked(flow)}">
            <i class="fa fa-lg fa-heart"></i> {{flow.likedBy.length}}
          </div>

          <div class="info">
            <i class="fa fa-lg fa-user"></i> {{flow.sharedBy.length}}
          </div>
        </div>

        <div class="info-group">
          <div class="info author">
            <i class="fa fa-lg fa-user"></i> {{flow.resource.owner.name || flow.resource.owner.uuid}}
          </div>
        </div>
      </div>
    </li>
  </ul>
</md-content>
